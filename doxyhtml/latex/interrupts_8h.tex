\hypertarget{interrupts_8h}{}\section{/home/loudish/mpx-\/spring2017-\/modestus/mpx\+\_\+core/include/core/interrupts.h File Reference}
\label{interrupts_8h}\index{/home/loudish/mpx-\/spring2017-\/modestus/mpx\+\_\+core/include/core/interrupts.\+h@{/home/loudish/mpx-\/spring2017-\/modestus/mpx\+\_\+core/include/core/interrupts.\+h}}
This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{interrupts_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{interrupts_8h_ad17d9a8aa78440af8fc40d3fd55dbad8}{init\+\_\+irq} (void)
\item 
void \hyperlink{interrupts_8h_afbc0dbef6f15e2df21b38724ea38c483}{init\+\_\+pic} (void)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{interrupts.\+h@{interrupts.\+h}!init\+\_\+irq@{init\+\_\+irq}}
\index{init\+\_\+irq@{init\+\_\+irq}!interrupts.\+h@{interrupts.\+h}}
\subsubsection[{\texorpdfstring{init\+\_\+irq(void)}{init_irq(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void init\+\_\+irq (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{interrupts_8h_ad17d9a8aa78440af8fc40d3fd55dbad8}{}\label{interrupts_8h_ad17d9a8aa78440af8fc40d3fd55dbad8}


Definition at line 66 of file interrupts.\+c.



References bounds(), breakpoint(), coprocessor(), coprocessor\+\_\+segment(), debug(), device\+\_\+not\+\_\+available(), divide\+\_\+error(), double\+\_\+fault(), general\+\_\+protection(), idt\+\_\+set\+\_\+gate(), invalid\+\_\+op(), invalid\+\_\+tss(), nmi(), overflow(), page\+\_\+fault(), reserved(), rtc\+\_\+isr(), segment\+\_\+not\+\_\+present(), and stack\+\_\+segment().



Referenced by kmain().


\begin{DoxyCode}
67 \{  
68   \textcolor{keywordtype}{int} i;
69 
70   \textcolor{comment}{// Necessary interrupt handlers for protected mode}
71   \hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int} isrs[17] = \{
72     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_a779cbe32e1a5f1dc8fa9b7191f116b28}{divide\_error},
73     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_a0d0105433f9c65c14928027b3f0966b7}{debug},
74     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_aa42d18df06cf68f8c05fded5344c4c7e}{nmi},
75     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_a874043e2396dd8ce20ec7af3ea1e2a86}{breakpoint},
76     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_a810f078a27a6781a7406c74985ecb761}{overflow},
77     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_a96724d36ad85f9a02231d8e6fe0434df}{bounds},
78     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_a422d8af60b69cc11dbcbb9d89c69756b}{invalid\_op},
79     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_abe88cd1dcc26cb58ee785c714e016f72}{device\_not\_available},
80     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_ae2b9f5b44e05e0c53f8eaaa98396d627}{double\_fault},
81     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_a1d688a0a370977c03fa98884a6e771e9}{coprocessor\_segment},
82     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_a972be67f6a5432cc8eab8d27755fb00f}{invalid\_tss},
83     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_af1748d9ea65ba652bc92074ab6570d8e}{segment\_not\_present},
84     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_a1ccc3198890318741629a03bb88bee6f}{stack\_segment},
85     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_a10777dd6c3a040471676741bbb8dda46}{general\_protection},
86     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_ab3800dd0177baaef4da00494edfb32d9}{page\_fault},
87     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_ad686e3fee8ec8346a6d8e98d970a02dd}{reserved},
88     (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_a5c538c7b7a55e3c981780b599fcb1de7}{coprocessor}
89   \};
90 
91   \textcolor{comment}{// Install handlers; 0x08=sel, 0x8e=flags}
92   for(i=0; i<32; i++)\{
93     \textcolor{keywordflow}{if} (i<17) \hyperlink{tables_8h_a9eca3fe1465f8d7d383551d804853139}{idt\_set\_gate}(i, isrs[i], 0x08, 0x8e);
94     \textcolor{keywordflow}{else} \hyperlink{tables_8h_a9eca3fe1465f8d7d383551d804853139}{idt\_set\_gate}(i, (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})reserved, 0x08, 0x8e);
95   \}
96   \textcolor{comment}{// Ignore interrupts from the real time clock}
97   \hyperlink{tables_8h_a9eca3fe1465f8d7d383551d804853139}{idt\_set\_gate}(0x08, (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})\hyperlink{interrupts_8c_a52f2615cebbdeab188085a03c913fcf9}{rtc\_isr}, 0x08, 0x8e);
98 \}
\end{DoxyCode}
\index{interrupts.\+h@{interrupts.\+h}!init\+\_\+pic@{init\+\_\+pic}}
\index{init\+\_\+pic@{init\+\_\+pic}!interrupts.\+h@{interrupts.\+h}}
\subsubsection[{\texorpdfstring{init\+\_\+pic(void)}{init_pic(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void init\+\_\+pic (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{interrupts_8h_afbc0dbef6f15e2df21b38724ea38c483}{}\label{interrupts_8h_afbc0dbef6f15e2df21b38724ea38c483}


Definition at line 106 of file interrupts.\+c.



References I\+C\+W1, I\+C\+W4, io\+\_\+wait, outb, P\+I\+C1, and P\+I\+C2.



Referenced by kmain().


\begin{DoxyCode}
107 \{
108   \hyperlink{io_8h_a0e661d36f40638a36550a534076f155b}{outb}(\hyperlink{interrupts_8c_a6b115109e4a0d3c5fb6252d091e86bfe}{PIC1},\hyperlink{interrupts_8c_ac56445256ce58f14f3c61af0cbf0cdad}{ICW1});   \textcolor{comment}{//send initialization code words 1 to PIC1}
109   \hyperlink{interrupts_8c_aeae4190ed25d0648577e1c742fd8a78d}{io\_wait}();
110   \hyperlink{io_8h_a0e661d36f40638a36550a534076f155b}{outb}(\hyperlink{interrupts_8c_ac90003f52c8d736193efc954ece08e58}{PIC2},\hyperlink{interrupts_8c_ac56445256ce58f14f3c61af0cbf0cdad}{ICW1});   \textcolor{comment}{//send icw1 to PIC2}
111   \hyperlink{interrupts_8c_aeae4190ed25d0648577e1c742fd8a78d}{io\_wait}();
112   \hyperlink{io_8h_a0e661d36f40638a36550a534076f155b}{outb}(\hyperlink{interrupts_8c_a6b115109e4a0d3c5fb6252d091e86bfe}{PIC1}+1,0x20); \textcolor{comment}{//icw2: remap irq0 to 32}
113   \hyperlink{interrupts_8c_aeae4190ed25d0648577e1c742fd8a78d}{io\_wait}();
114   \hyperlink{io_8h_a0e661d36f40638a36550a534076f155b}{outb}(\hyperlink{interrupts_8c_ac90003f52c8d736193efc954ece08e58}{PIC2}+1,0x28); \textcolor{comment}{//icw2: remap irq8 to 40}
115   \hyperlink{interrupts_8c_aeae4190ed25d0648577e1c742fd8a78d}{io\_wait}();
116   \hyperlink{io_8h_a0e661d36f40638a36550a534076f155b}{outb}(\hyperlink{interrupts_8c_a6b115109e4a0d3c5fb6252d091e86bfe}{PIC1}+1,4);    \textcolor{comment}{//icw3}
117   \hyperlink{interrupts_8c_aeae4190ed25d0648577e1c742fd8a78d}{io\_wait}();
118   \hyperlink{io_8h_a0e661d36f40638a36550a534076f155b}{outb}(\hyperlink{interrupts_8c_ac90003f52c8d736193efc954ece08e58}{PIC2}+1,2);    \textcolor{comment}{//icw3}
119   \hyperlink{interrupts_8c_aeae4190ed25d0648577e1c742fd8a78d}{io\_wait}();
120   \hyperlink{io_8h_a0e661d36f40638a36550a534076f155b}{outb}(\hyperlink{interrupts_8c_a6b115109e4a0d3c5fb6252d091e86bfe}{PIC1}+1,\hyperlink{interrupts_8c_a7945f331ddf94a0e0e938f825bc4d43c}{ICW4}); \textcolor{comment}{//icw4: 80x86, automatic handling}
121   \hyperlink{interrupts_8c_aeae4190ed25d0648577e1c742fd8a78d}{io\_wait}();
122   \hyperlink{io_8h_a0e661d36f40638a36550a534076f155b}{outb}(\hyperlink{interrupts_8c_ac90003f52c8d736193efc954ece08e58}{PIC2}+1,\hyperlink{interrupts_8c_a7945f331ddf94a0e0e938f825bc4d43c}{ICW4}); \textcolor{comment}{//icw4: 80x86, automatic handling}
123   \hyperlink{interrupts_8c_aeae4190ed25d0648577e1c742fd8a78d}{io\_wait}();
124   \hyperlink{io_8h_a0e661d36f40638a36550a534076f155b}{outb}(\hyperlink{interrupts_8c_a6b115109e4a0d3c5fb6252d091e86bfe}{PIC1}+1,0xFF); \textcolor{comment}{//disable irqs for PIC1}
125   \hyperlink{interrupts_8c_aeae4190ed25d0648577e1c742fd8a78d}{io\_wait}();
126   \hyperlink{io_8h_a0e661d36f40638a36550a534076f155b}{outb}(\hyperlink{interrupts_8c_ac90003f52c8d736193efc954ece08e58}{PIC2}+1,0xFF); \textcolor{comment}{//disable irqs for PIC2}
127 \}
\end{DoxyCode}
