\hypertarget{modules_2mpx__supt_8c}{}\section{/home/loudish/mpx-\/spring2017-\/modestus/mpx\+\_\+core/modules/mpx\+\_\+supt.c File Reference}
\label{modules_2mpx__supt_8c}\index{/home/loudish/mpx-\/spring2017-\/modestus/mpx\+\_\+core/modules/mpx\+\_\+supt.\+c@{/home/loudish/mpx-\/spring2017-\/modestus/mpx\+\_\+core/modules/mpx\+\_\+supt.\+c}}
{\ttfamily \#include \char`\"{}mpx\+\_\+supt.\+h\char`\"{}}\\*
{\ttfamily \#include $<$mem/heap.\+h$>$}\\*
Include dependency graph for mpx\+\_\+supt.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=238pt]{modules_2mpx__supt_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{modules_2mpx__supt_8c_afb6ff5e2e9bdde9d8971a497b6fe38ae}{sys\+\_\+req} (int op\+\_\+code)
\item 
void \hyperlink{modules_2mpx__supt_8c_a53332c6a3107a4feed6e2e79690a6ffa}{mpx\+\_\+init} (int cur\+\_\+mod)
\item 
void \hyperlink{modules_2mpx__supt_8c_a4a28bb188c9fed51228c46980b20e605}{sys\+\_\+set\+\_\+malloc} (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}($\ast$func)(\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}))
\item 
void \hyperlink{modules_2mpx__supt_8c_a2463d934fa39601c275a3ade8afd18bc}{sys\+\_\+set\+\_\+free} (int($\ast$func)(void $\ast$))
\item 
void $\ast$ \hyperlink{modules_2mpx__supt_8c_a61adad2abba0a3a225c2290b3de1fe93}{sys\+\_\+alloc\+\_\+mem} (\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int} size)
\item 
int \hyperlink{modules_2mpx__supt_8c_a950663d39dbb073c9dff9cf3b5d3392c}{sys\+\_\+free\+\_\+mem} (void $\ast$ptr)
\item 
void \hyperlink{modules_2mpx__supt_8c_a83abbeda22fc5e6c2b35523b64199c1c}{idle} ()
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structparam}{param} \hyperlink{modules_2mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}{params}
\item 
int \hyperlink{modules_2mpx__supt_8c_a3d19c725b7f9f45e9da97a79ca6a4737}{current\+\_\+module} = -\/1
\item 
\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int}($\ast$ \hyperlink{modules_2mpx__supt_8c_a421e2b48efb5facc71d16979252710e2}{student\+\_\+malloc} )(\hyperlink{system_8h_a757de76cafbcddaac0d1632902fe4cb8}{u32int})
\item 
int($\ast$ \hyperlink{modules_2mpx__supt_8c_a19c47c02b0338bc13716d98305bb8a34}{student\+\_\+free} )(void $\ast$)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}!idle@{idle}}
\index{idle@{idle}!modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}}
\subsubsection[{\texorpdfstring{idle()}{idle()}}]{\setlength{\rightskip}{0pt plus 5cm}void idle (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{modules_2mpx__supt_8c_a83abbeda22fc5e6c2b35523b64199c1c}{}\label{modules_2mpx__supt_8c_a83abbeda22fc5e6c2b35523b64199c1c}


Definition at line 47 of file mpx\+\_\+supt.\+c.



References I\+D\+LE, and sys\+\_\+req().


\begin{DoxyCode}
48 \{
49   \textcolor{keywordflow}{while}(1)\{
50     \hyperlink{kernel_2core_2mpx__supt_8c_afb6ff5e2e9bdde9d8971a497b6fe38ae}{sys\_req}(\hyperlink{include_2core_2mpx__supt_8h_a9c21a7caee326d7803b94ae1952b27ca}{IDLE});
51   \}
52 \}
\end{DoxyCode}
\index{modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}!mpx\+\_\+init@{mpx\+\_\+init}}
\index{mpx\+\_\+init@{mpx\+\_\+init}!modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}}
\subsubsection[{\texorpdfstring{mpx\+\_\+init(int cur\+\_\+mod)}{mpx_init(int cur_mod)}}]{\setlength{\rightskip}{0pt plus 5cm}void mpx\+\_\+init (
\begin{DoxyParamCaption}
\item[{int}]{cur\+\_\+mod}
\end{DoxyParamCaption}
)}\hypertarget{modules_2mpx__supt_8c_a53332c6a3107a4feed6e2e79690a6ffa}{}\label{modules_2mpx__supt_8c_a53332c6a3107a4feed6e2e79690a6ffa}


Definition at line 16 of file mpx\+\_\+supt.\+c.



References current\+\_\+module.


\begin{DoxyCode}
17 \{
18   \hyperlink{kernel_2core_2mpx__supt_8c_a3d19c725b7f9f45e9da97a79ca6a4737}{current\_module} = cur\_mod;
19 \}
\end{DoxyCode}
\index{modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}!sys\+\_\+alloc\+\_\+mem@{sys\+\_\+alloc\+\_\+mem}}
\index{sys\+\_\+alloc\+\_\+mem@{sys\+\_\+alloc\+\_\+mem}!modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}}
\subsubsection[{\texorpdfstring{sys\+\_\+alloc\+\_\+mem(u32int size)}{sys_alloc_mem(u32int size)}}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ sys\+\_\+alloc\+\_\+mem (
\begin{DoxyParamCaption}
\item[{{\bf u32int}}]{size}
\end{DoxyParamCaption}
)}\hypertarget{modules_2mpx__supt_8c_a61adad2abba0a3a225c2290b3de1fe93}{}\label{modules_2mpx__supt_8c_a61adad2abba0a3a225c2290b3de1fe93}


Definition at line 31 of file mpx\+\_\+supt.\+c.



References current\+\_\+module, kmalloc(), and M\+O\+D\+U\+L\+E\+\_\+\+R5.



Referenced by allocate\+P\+C\+B(), and make\+New\+Node().


\begin{DoxyCode}
32 \{
33   \textcolor{keywordflow}{if} (\hyperlink{kernel_2core_2mpx__supt_8c_a3d19c725b7f9f45e9da97a79ca6a4737}{current\_module} < \hyperlink{include_2core_2mpx__supt_8h_a68745bb3b58fd02dcee2cad3b2331def}{MODULE\_R5})
34     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{void} *) \hyperlink{heap_8h_a15d6a52c5c080c8c7ffc73e336d8e574}{kmalloc}(size);
35   \textcolor{keywordflow}{else}
36     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{void} *) (*student\_malloc)(size);
37 \}
\end{DoxyCode}
\index{modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}!sys\+\_\+free\+\_\+mem@{sys\+\_\+free\+\_\+mem}}
\index{sys\+\_\+free\+\_\+mem@{sys\+\_\+free\+\_\+mem}!modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}}
\subsubsection[{\texorpdfstring{sys\+\_\+free\+\_\+mem(void $\ast$ptr)}{sys_free_mem(void *ptr)}}]{\setlength{\rightskip}{0pt plus 5cm}int sys\+\_\+free\+\_\+mem (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{ptr}
\end{DoxyParamCaption}
)}\hypertarget{modules_2mpx__supt_8c_a950663d39dbb073c9dff9cf3b5d3392c}{}\label{modules_2mpx__supt_8c_a950663d39dbb073c9dff9cf3b5d3392c}


Definition at line 39 of file mpx\+\_\+supt.\+c.



References current\+\_\+module, M\+O\+D\+U\+L\+E\+\_\+\+R5, and student\+\_\+free.



Referenced by free\+P\+C\+B().


\begin{DoxyCode}
40 \{
41   \textcolor{keywordflow}{if} (\hyperlink{kernel_2core_2mpx__supt_8c_a3d19c725b7f9f45e9da97a79ca6a4737}{current\_module} >= \hyperlink{include_2core_2mpx__supt_8h_a68745bb3b58fd02dcee2cad3b2331def}{MODULE\_R5})
42     \textcolor{keywordflow}{return} (*\hyperlink{kernel_2core_2mpx__supt_8c_a19c47c02b0338bc13716d98305bb8a34}{student\_free})(ptr);
43   \textcolor{comment}{// otherwise we don't free anything}
44   \textcolor{keywordflow}{return} -1;
45 \}
\end{DoxyCode}
\index{modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}!sys\+\_\+req@{sys\+\_\+req}}
\index{sys\+\_\+req@{sys\+\_\+req}!modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}}
\subsubsection[{\texorpdfstring{sys\+\_\+req(int op\+\_\+code)}{sys_req(int op_code)}}]{\setlength{\rightskip}{0pt plus 5cm}int sys\+\_\+req (
\begin{DoxyParamCaption}
\item[{int}]{op\+\_\+code}
\end{DoxyParamCaption}
)}\hypertarget{modules_2mpx__supt_8c_afb6ff5e2e9bdde9d8971a497b6fe38ae}{}\label{modules_2mpx__supt_8c_afb6ff5e2e9bdde9d8971a497b6fe38ae}


Definition at line 9 of file mpx\+\_\+supt.\+c.



References param\+::op\+\_\+code.


\begin{DoxyCode}
10 \{
11   \hyperlink{kernel_2core_2mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}{params}.\hyperlink{structparam_a81c8b24055c2908ebe480598aba6044c}{op\_code} = op\_code;
12   \textcolor{keyword}{asm} \textcolor{keyword}{volatile} (\textcolor{stringliteral}{"int $60"});
13   \textcolor{keywordflow}{return} 0;
14 \}
\end{DoxyCode}
\index{modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}!sys\+\_\+set\+\_\+free@{sys\+\_\+set\+\_\+free}}
\index{sys\+\_\+set\+\_\+free@{sys\+\_\+set\+\_\+free}!modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}}
\subsubsection[{\texorpdfstring{sys\+\_\+set\+\_\+free(int($\ast$func)(void $\ast$))}{sys_set_free(int(*func)(void *))}}]{\setlength{\rightskip}{0pt plus 5cm}void sys\+\_\+set\+\_\+free (
\begin{DoxyParamCaption}
\item[{int($\ast$)(void $\ast$)}]{func}
\end{DoxyParamCaption}
)}\hypertarget{modules_2mpx__supt_8c_a2463d934fa39601c275a3ade8afd18bc}{}\label{modules_2mpx__supt_8c_a2463d934fa39601c275a3ade8afd18bc}


Definition at line 26 of file mpx\+\_\+supt.\+c.



References student\+\_\+free.


\begin{DoxyCode}
27 \{
28   \hyperlink{kernel_2core_2mpx__supt_8c_a19c47c02b0338bc13716d98305bb8a34}{student\_free} = func;
29 \}
\end{DoxyCode}
\index{modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}!sys\+\_\+set\+\_\+malloc@{sys\+\_\+set\+\_\+malloc}}
\index{sys\+\_\+set\+\_\+malloc@{sys\+\_\+set\+\_\+malloc}!modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}}
\subsubsection[{\texorpdfstring{sys\+\_\+set\+\_\+malloc(u32int($\ast$func)(u32int))}{sys_set_malloc(u32int(*func)(u32int))}}]{\setlength{\rightskip}{0pt plus 5cm}void sys\+\_\+set\+\_\+malloc (
\begin{DoxyParamCaption}
\item[{{\bf u32int}($\ast$)({\bf u32int})}]{func}
\end{DoxyParamCaption}
)}\hypertarget{modules_2mpx__supt_8c_a4a28bb188c9fed51228c46980b20e605}{}\label{modules_2mpx__supt_8c_a4a28bb188c9fed51228c46980b20e605}


Definition at line 21 of file mpx\+\_\+supt.\+c.



References student\+\_\+malloc.


\begin{DoxyCode}
22 \{
23   \hyperlink{kernel_2core_2mpx__supt_8c_a421e2b48efb5facc71d16979252710e2}{student\_malloc} = func;
24 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\index{modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}!current\+\_\+module@{current\+\_\+module}}
\index{current\+\_\+module@{current\+\_\+module}!modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}}
\subsubsection[{\texorpdfstring{current\+\_\+module}{current_module}}]{\setlength{\rightskip}{0pt plus 5cm}int current\+\_\+module = -\/1}\hypertarget{modules_2mpx__supt_8c_a3d19c725b7f9f45e9da97a79ca6a4737}{}\label{modules_2mpx__supt_8c_a3d19c725b7f9f45e9da97a79ca6a4737}


Definition at line 5 of file mpx\+\_\+supt.\+c.

\index{modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}!params@{params}}
\index{params@{params}!modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}}
\subsubsection[{\texorpdfstring{params}{params}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf param} params}\hypertarget{modules_2mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}{}\label{modules_2mpx__supt_8c_a3b4b77494d0fad58939896ddc5290c99}


Definition at line 4 of file mpx\+\_\+supt.\+c.

\index{modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}!student\+\_\+free@{student\+\_\+free}}
\index{student\+\_\+free@{student\+\_\+free}!modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}}
\subsubsection[{\texorpdfstring{student\+\_\+free}{student_free}}]{\setlength{\rightskip}{0pt plus 5cm}int($\ast$ student\+\_\+free) (void $\ast$)}\hypertarget{modules_2mpx__supt_8c_a19c47c02b0338bc13716d98305bb8a34}{}\label{modules_2mpx__supt_8c_a19c47c02b0338bc13716d98305bb8a34}


Definition at line 7 of file mpx\+\_\+supt.\+c.

\index{modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}!student\+\_\+malloc@{student\+\_\+malloc}}
\index{student\+\_\+malloc@{student\+\_\+malloc}!modules/mpx\+\_\+supt.\+c@{modules/mpx\+\_\+supt.\+c}}
\subsubsection[{\texorpdfstring{student\+\_\+malloc}{student_malloc}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u32int}($\ast$ student\+\_\+malloc) ({\bf u32int})}\hypertarget{modules_2mpx__supt_8c_a421e2b48efb5facc71d16979252710e2}{}\label{modules_2mpx__supt_8c_a421e2b48efb5facc71d16979252710e2}


Definition at line 6 of file mpx\+\_\+supt.\+c.

